<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Quadopod</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
  </head>
  <body>
    <script src="js/three.js"></script>
    <script src="js/STLLoader.js"></script>
    <script src="js/Detector.js"></script>
    <script src="js/OrbitControls.js"></script>
    <script src="js/handLoader.js"></script>

    <script type="text/javascript" src="dat.gui/build/dat.gui.js"></script>
    <script type="text/javascript">

    var InterfaceCode = function() {
      this.robot = 'QuadPod';
      this.speed = 0.8;
      this.message = ''

      this.robot_x = 0;
      this.robot_y = 0;
      this.robot_z = 0;
      this.automove = false;

      this.j1_x = 0;
      this.j1_y = 0;
      this.j1_z = 0;
      this.j1_highlight = false;

      this.j2_x = 0;
      this.j2_y = 0;
      this.j2_z = 0;
      this.j2_highlight = false;

      this.j3_x = 0;
      this.j3_y = 0;
      this.j3_z = 0;
      this.j3_highlight = false;

      this.j4_x = 0;
      this.j4_y = 0;
      this.j4_z = 0;
      this.j4_highlight = false;

      this.pose = "calibration";

      this.test_function = function() {
          console.log("Test");
      };
      // Define render logic ...
    };

    window.onload = function() {
      var text = new InterfaceCode();
      var gui = new dat.GUI();

      gui.remember(text);

      gui.add(text, 'robot');

      var cam_f = gui.addFolder('camera');
      cam_f.add(controls.target, 'x', -1,1).step(0.01).onFinishChange(function(){ controls.update(); }).listen();
      cam_f.add(controls.target, 'y', -1,1).step(0.01).onFinishChange(function(){ controls.update(); }).listen();
      cam_f.add(controls.target, 'z', -1,1).step(0.01).onFinishChange(function(){ controls.update(); }).listen();

      cam_f.add(controls, 'zoom0', -1,1).step(0.01).onFinishChange(function(){ controls.update(); }).listen();

      gui.add(text, 'speed', 0, 1);

      gui.add(robot, 'display_outline').onFinishChange(
        function(value){
            if (value == true)
                console.log("enable highlight");
            else
                console.log("disable highlight");

            robot.setOutline(value);
        });

      gui.add(text, 'test_function');

      var folder = gui.addFolder('joints');

      var f1 = folder.addFolder('position');
      controller_x = f1.add(text, 'robot_x', 0, 1);
      f1.add(text, 'robot_y', 0, 1);
      f1.add(text, 'robot_z', 0, 1);
      f1.add(text, 'automove');

      controller_x.onChange(function(value) {
        // Fires on every change, drag, keypress, etc.
      });

      controller_x.onFinishChange(function(value) {
        // Fires when a controller loses focus.
        alert("The new value is " + value);
      });

      var f2 = folder.addFolder('joint 1');
      f2.add(text, 'j1_x', 0, 1);
      f2.add(text, 'j1_y', 0, 1);
      f2.add(text, 'j1_z', 0, 1);
      f2.add(text, 'j1_highlight').onFinishChange(
          function(){
              console.log("disable highlight");
           });

      var f3 = folder.addFolder('joint 2');
      f3.add(text, 'j2_x', 0, 1);
      f3.add(text, 'j2_y', 0, 1);
      f3.add(text, 'j2_z', 0, 1);
      f3.add(text, 'j2_highlight');

      var f3 = folder.addFolder('joint 3');
      f3.add(text, 'j3_x', 0, 1);
      f3.add(text, 'j3_y', 0, 1);
      f3.add(text, 'j3_z', 0, 1);
      f3.add(text, 'j3_highlight');

      var f4 = folder.addFolder('joint 4');
      f4.add(text, 'j4_x', 0, 1);
      f4.add(text, 'j4_y', 0, 1);
      f4.add(text, 'j4_z', 0, 1);
      f4.add(text, 'j4_highlight');

      gui.add(text, 'pose', [ 'calibration', 'relax', 'extended', 'test' ] );

      var update = function() {
        //requestAnimationFrame(update);
        //console.log("Update");
      };

    };

    </script>

  </body>
</html>
